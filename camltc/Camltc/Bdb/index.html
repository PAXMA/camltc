<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Bdb (camltc.Camltc.Bdb)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="generator" content="doc-ock-html v1.0.0-1-g1fc9bf0"/></head><body><nav id="top"><a href="../index.html">Up</a> &mdash; <span class="package">package <a href="../../index.html">camltc</a></span></nav><header><h1><span class="keyword">Module</span> <span class="module-path">Camltc.Bdb</span></h1></header><div class="spec type" id="type-bdb"><a href="#type-bdb" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>bdb</code><code></code><code></code></div><div class="doc"></div></div><div class="spec type" id="type-bdbcur"><a href="#type-bdbcur" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>bdbcur</code><code></code><code></code></div><div class="doc"></div></div><div class="spec val" id="val-default_mode"><a href="#val-default_mode" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>default_mode : int</code></div><div class="doc"></div></div><div class="spec val" id="val-readonly_mode"><a href="#val-readonly_mode" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>readonly_mode : int</code></div><div class="doc"></div></div><div class="spec type" id="type-opt"><a href="#type-opt" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>opt</code><code></code><code><span class="keyword"> = </span></code><table class="variant"><tr id="type-opt.BDBTLARGE" class="anchored"><td class="def constructor"><a href="#type-opt.BDBTLARGE" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">BDBTLARGE</span></code></td></tr></table><code></code></div><div class="doc"></div></div><div class="spec val" id="val-put"><a href="#val-put" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>put : <a href="index.html#type-bdb">bdb</a> <span class="keyword">&#8209;&gt;</span> string <span class="keyword">&#8209;&gt;</span> string <span class="keyword">&#8209;&gt;</span> unit</code></div><div class="doc"><p><code class="code">put db key value</code> add to <code class="code">db</code> the <code class="code">key</code> to <code class="code">value</code> binding.</p></div></div><div class="spec val" id="val-get"><a href="#val-get" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>get : <a href="index.html#type-bdb">bdb</a> <span class="keyword">&#8209;&gt;</span> string <span class="keyword">&#8209;&gt;</span> string</code></div><div class="doc"><p><code class="code">get db key</code> retrieve from <code class="code">db</code> the value associated with <code class="code">key</code>.</p><ul class="at-tag"><li><span class="at-tag raise">Raises</span> <span class="module-path">DOCUMENT_ME</span>: in case <code class="code">key</code> was not found in <code class="code">db</code>.</li></ul></div></div><div class="spec val" id="val-get3"><a href="#val-get3" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>get3 : <a href="index.html#type-bdb">bdb</a> <span class="keyword">&#8209;&gt;</span> string <span class="keyword">&#8209;&gt;</span> string</code></div><div class="doc"><p><code class="code">get3 db key</code> DOCUMENT_ME</p></div></div><div class="spec val" id="val-oreader"><a href="#val-oreader" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>oreader : int</code></div><div class="doc"></div></div><div class="spec val" id="val-owriter"><a href="#val-owriter" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>owriter : int</code></div><div class="doc"></div></div><div class="spec val" id="val-ocreat"><a href="#val-ocreat" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>ocreat : int</code></div><div class="doc"></div></div><div class="spec val" id="val-otrunc"><a href="#val-otrunc" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>otrunc : int</code></div><div class="doc"></div></div><div class="spec val" id="val-onolck"><a href="#val-onolck" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>onolck : int</code></div><div class="doc"></div></div><div class="spec val" id="val-olcknb"><a href="#val-olcknb" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>olcknb : int</code></div><div class="doc"></div></div><div class="spec val" id="val-otsync"><a href="#val-otsync" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>otsync : int</code></div><div class="doc"></div></div><div class="spec val" id="val-create"><a href="#val-create" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>create : ?&#8288;mode:int <span class="keyword">&#8209;&gt;</span> ?&#8288;lcnum:int <span class="keyword">&#8209;&gt;</span> ?&#8288;ncnum:int <span class="keyword">&#8209;&gt;</span> string <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-opt">opt</a> list <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-bdb">bdb</a></code></div><div class="doc"><p>create a bdb for standalone use</p></div></div><div class="spec val" id="val-close"><a href="#val-close" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>close : <a href="index.html#type-bdb">bdb</a> <span class="keyword">&#8209;&gt;</span> unit</code></div><div class="doc"><p>close given bdb</p></div></div><div class="spec val" id="val-delete"><a href="#val-delete" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>delete : <a href="index.html#type-bdb">bdb</a> <span class="keyword">&#8209;&gt;</span> unit</code></div><div class="doc"><p>delete given bdb (must have been closed before)</p></div></div><div class="spec val" id="val-sync"><a href="#val-sync" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>sync : <a href="index.html#type-bdb">bdb</a> <span class="keyword">&#8209;&gt;</span> unit</code></div><div class="doc"><p>sync the given bdb</p></div></div><div class="spec val" id="val-get_cursor"><a href="#val-get_cursor" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>get_cursor : <a href="index.html#type-bdb">bdb</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-bdbcur">bdbcur</a></code></div><div class="doc"><p>create a cursor for the given bdb</p></div></div><div class="spec val" id="val-get3_generic"><a href="#val-get3_generic" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>get3_generic : <a href="index.html#type-bdb">bdb</a> <span class="keyword">&#8209;&gt;</span> string <span class="keyword">&#8209;&gt;</span> int <span class="keyword">&#8209;&gt;</span> int <span class="keyword">&#8209;&gt;</span> string</code></div><div class="doc"><p><code class="code">get3_generic bdb s off len</code> considers the substring of s
as the key for a get3</p></div></div><div class="spec val" id="val-get_nolock"><a href="#val-get_nolock" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>get_nolock : <a href="index.html#type-bdb">bdb</a> <span class="keyword">&#8209;&gt;</span> string <span class="keyword">&#8209;&gt;</span> string</code></div><div class="doc"><p><code class="code">get_nolock db key</code> DOCUMENT_ME probably faster version
of get on a readonly-opened database</p></div></div><div class="spec val" id="val-out"><a href="#val-out" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>out : <a href="index.html#type-bdb">bdb</a> <span class="keyword">&#8209;&gt;</span> string <span class="keyword">&#8209;&gt;</span> unit</code></div><div class="doc"><p><code class="code">out db key</code> remove from <code class="code">db</code> the binding for <code class="code">key</code>.</p><ul class="at-tag"><li><span class="at-tag raise">Raises</span> <span class="module-path">DOCUMENT_ME</span>: in case <code class="code">key</code> was not found in <code class="code">db</code>.</li></ul></div></div><div class="spec val" id="val-range"><a href="#val-range" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>range : <a href="index.html#type-bdb">bdb</a> <span class="keyword">&#8209;&gt;</span> string option <span class="keyword">&#8209;&gt;</span> bool <span class="keyword">&#8209;&gt;</span> string option <span class="keyword">&#8209;&gt;</span> bool <span class="keyword">&#8209;&gt;</span> int <span class="keyword">&#8209;&gt;</span> string array</code></div><div class="doc"></div></div><div class="spec val" id="val-exists"><a href="#val-exists" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>exists : <a href="index.html#type-bdb">bdb</a> <span class="keyword">&#8209;&gt;</span> string <span class="keyword">&#8209;&gt;</span> bool</code></div><div class="doc"><p><code class="code">exists db key</code> check if <code class="code">key</code> is bound in <code class="code">db</code>.</p></div></div><div class="spec val" id="val-delete_prefix"><a href="#val-delete_prefix" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>delete_prefix : <a href="index.html#type-bdb">bdb</a> <span class="keyword">&#8209;&gt;</span> string <span class="keyword">&#8209;&gt;</span> int</code></div><div class="doc"></div></div><div class="spec val" id="val-prefix_keys"><a href="#val-prefix_keys" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>prefix_keys : <a href="index.html#type-bdb">bdb</a> <span class="keyword">&#8209;&gt;</span> string <span class="keyword">&#8209;&gt;</span> int <span class="keyword">&#8209;&gt;</span> string array</code></div><div class="doc"></div></div><div class="spec type" id="type-include_key"><a href="#type-include_key" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>include_key</code><code><span class="keyword"> = </span>bool</code><code></code></div><div class="doc"></div></div><div class="spec type" id="type-upper_border"><a href="#type-upper_border" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>upper_border</code><code></code><code><span class="keyword"> = </span></code><table class="variant"><tr id="type-upper_border.BKey" class="anchored"><td class="def constructor"><a href="#type-upper_border.BKey" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">BKey</span><span class="keyword"> of </span>string<span class="keyword"> * </span><a href="index.html#type-include_key">include_key</a></code></td></tr><tr id="type-upper_border.BOmega" class="anchored"><td class="def constructor"><a href="#type-upper_border.BOmega" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">BOmega</span></code></td></tr></table><code></code></div><div class="doc"></div></div><div class="spec val" id="val-range_ascending"><a href="#val-range_ascending" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>range_ascending : <a href="index.html#type-bdb">bdb</a> <span class="keyword">&#8209;&gt;</span> string <span class="keyword">&#8209;&gt;</span> bool <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-upper_border">upper_border</a> <span class="keyword">&#8209;&gt;</span> ((string<span class="keyword"> * </span>string) <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span><span class="keyword"> * </span>bool) <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span></code></div><div class="doc"></div></div><div class="spec val" id="val-range_descending"><a href="#val-range_descending" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>range_descending : <a href="index.html#type-bdb">bdb</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-upper_border">upper_border</a> <span class="keyword">&#8209;&gt;</span> string <span class="keyword">&#8209;&gt;</span> bool <span class="keyword">&#8209;&gt;</span> ((string<span class="keyword"> * </span>string) <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span><span class="keyword"> * </span>bool) <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span></code></div><div class="doc"></div></div><div class="spec val" id="val-range_entries"><a href="#val-range_entries" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>range_entries : string <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-bdb">bdb</a> <span class="keyword">&#8209;&gt;</span> string option <span class="keyword">&#8209;&gt;</span> bool <span class="keyword">&#8209;&gt;</span> string option <span class="keyword">&#8209;&gt;</span> bool <span class="keyword">&#8209;&gt;</span> int <span class="keyword">&#8209;&gt;</span> (string<span class="keyword"> * </span>string) array</code></div><div class="doc"></div></div><div class="spec val" id="val-rev_range_entries"><a href="#val-rev_range_entries" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>rev_range_entries : string <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-bdb">bdb</a> <span class="keyword">&#8209;&gt;</span> string option <span class="keyword">&#8209;&gt;</span> bool <span class="keyword">&#8209;&gt;</span> string option <span class="keyword">&#8209;&gt;</span> bool <span class="keyword">&#8209;&gt;</span> int <span class="keyword">&#8209;&gt;</span> (string<span class="keyword"> * </span>string) list</code></div><div class="doc"></div></div><div class="spec val" id="val-get_key_count"><a href="#val-get_key_count" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>get_key_count : <a href="index.html#type-bdb">bdb</a> <span class="keyword">&#8209;&gt;</span> int64</code></div><div class="doc"></div></div><div class="spec val" id="val-first"><a href="#val-first" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>first : <a href="index.html#type-bdb">bdb</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-bdbcur">bdbcur</a> <span class="keyword">&#8209;&gt;</span> unit</code></div><div class="doc"><p><code class="code">first db cur</code> place cursor <code class="code">cur</code> in front of the first
record in <code class="code">db</code>.</p></div></div><div class="spec val" id="val-jump"><a href="#val-jump" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>jump : <a href="index.html#type-bdb">bdb</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-bdbcur">bdbcur</a> <span class="keyword">&#8209;&gt;</span> string <span class="keyword">&#8209;&gt;</span> unit</code></div><div class="doc"><p><code class="code">jump db cur key</code> place cursor <code class="code">cur</code> in front of the
record with key <code class="code">key</code> in <code class="code">db</code>.</p></div></div><div class="spec val" id="val-next"><a href="#val-next" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>next : <a href="index.html#type-bdb">bdb</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-bdbcur">bdbcur</a> <span class="keyword">&#8209;&gt;</span> unit</code></div><div class="doc"><p><code class="code">next db cur</code> place cursor <code class="code">cur</code> in front of the next
record in <code class="code">db</code></p></div></div><div class="spec val" id="val-prev"><a href="#val-prev" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>prev : <a href="index.html#type-bdb">bdb</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-bdbcur">bdbcur</a> <span class="keyword">&#8209;&gt;</span> unit</code></div><div class="doc"><p><code class="code">prev db cur</code> place cursor <code class="code">cur</code> in front of the previous
record in <code class="code">db</code>.
DOCUMENT_ME what does it do when we were already on the first?</p></div></div><div class="spec val" id="val-last"><a href="#val-last" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>last : <a href="index.html#type-bdb">bdb</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-bdbcur">bdbcur</a> <span class="keyword">&#8209;&gt;</span> unit</code></div><div class="doc"><p><code class="code">last db cur</code> place cursor <code class="code">cur</code> in front of the last
record in <code class="code">db</code></p></div></div><div class="spec val" id="val-cur_out"><a href="#val-cur_out" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>cur_out : <a href="index.html#type-bdb">bdb</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-bdbcur">bdbcur</a> <span class="keyword">&#8209;&gt;</span> unit</code></div><div class="doc"><p><code class="code">cur_out db cur</code> delete the key value pair pointed to by <code class="code">cur</code>
in <code class="code">db</code> and go to the next one</p></div></div><div class="spec val" id="val-key"><a href="#val-key" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>key : <a href="index.html#type-bdb">bdb</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-bdbcur">bdbcur</a> <span class="keyword">&#8209;&gt;</span> string</code></div><div class="doc"><p><code class="code">key db cur</code> get the key currently pointed to by cursor <code class="code">cur</code></p></div></div><div class="spec val" id="val-value"><a href="#val-value" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>value : <a href="index.html#type-bdb">bdb</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-bdbcur">bdbcur</a> <span class="keyword">&#8209;&gt;</span> string</code></div><div class="doc"><p><code class="code">value db cur</code> get the value currently pointed to by cursor <code class="code">cur</code></p></div></div><div class="spec val" id="val-key3"><a href="#val-key3" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>key3 : <a href="index.html#type-bdb">bdb</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-bdbcur">bdbcur</a> <span class="keyword">&#8209;&gt;</span> string</code></div><div class="doc"><p><code class="code">key3 db cur</code> DOCUMENT_ME</p></div></div><div class="spec val" id="val-value3"><a href="#val-value3" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>value3 : <a href="index.html#type-bdb">bdb</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-bdbcur">bdbcur</a> <span class="keyword">&#8209;&gt;</span> string</code></div><div class="doc"><p><code class="code">value3 db cur</code> DOCUMENT_ME</p></div></div><div class="spec val" id="val-with_cursor"><a href="#val-with_cursor" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>with_cursor : <a href="index.html#type-bdb">bdb</a> <span class="keyword">&#8209;&gt;</span> (<a href="index.html#type-bdb">bdb</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-bdbcur">bdbcur</a> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span>) <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span></code></div><div class="doc"><p><code class="code">with_cursor db f</code> DOCUMENT_ME</p></div></div><div class="spec val" id="val-_tranbegin"><a href="#val-_tranbegin" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>_tranbegin : <a href="index.html#type-bdb">bdb</a> <span class="keyword">&#8209;&gt;</span> unit</code></div><div class="doc"></div></div><div class="spec val" id="val-_trancommit"><a href="#val-_trancommit" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>_trancommit : <a href="index.html#type-bdb">bdb</a> <span class="keyword">&#8209;&gt;</span> unit</code></div><div class="doc"></div></div><div class="spec val" id="val-_tranabort"><a href="#val-_tranabort" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>_tranabort : <a href="index.html#type-bdb">bdb</a> <span class="keyword">&#8209;&gt;</span> unit</code></div><div class="doc"></div></div><div class="spec type" id="type-flag"><a href="#type-flag" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>flag</code><code></code><code><span class="keyword"> = </span></code><table class="variant"><tr id="type-flag.BDBFOPEN" class="anchored"><td class="def constructor"><a href="#type-flag.BDBFOPEN" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">BDBFOPEN</span></code></td></tr><tr id="type-flag.BDBFFATAL" class="anchored"><td class="def constructor"><a href="#type-flag.BDBFFATAL" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">BDBFFATAL</span></code></td></tr></table><code></code></div><div class="doc"></div></div><div class="spec val" id="val-flags"><a href="#val-flags" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>flags : <a href="index.html#type-bdb">bdb</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-flag">flag</a> list</code></div><div class="doc"></div></div><div class="spec val" id="val-defrag"><a href="#val-defrag" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>defrag : ?&#8288;step:int64 <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-bdb">bdb</a> <span class="keyword">&#8209;&gt;</span> int</code></div><div class="doc"><p><code class="code">defrag ~step db</code> DOCUMENT_ME</p></div></div><div class="spec val" id="val-copy_from_cursor"><a href="#val-copy_from_cursor" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>copy_from_cursor : source:<a href="index.html#type-bdb">bdb</a> <span class="keyword">&#8209;&gt;</span> cursor:<a href="index.html#type-bdbcur">bdbcur</a> <span class="keyword">&#8209;&gt;</span> target:<a href="index.html#type-bdb">bdb</a> <span class="keyword">&#8209;&gt;</span> max:int option <span class="keyword">&#8209;&gt;</span> int</code></div><div class="doc"></div></div></body></html>